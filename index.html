<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Arifi Tokatla</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#000;
  color:#fff;
  font-family:Arial,sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  touch-action: manipulation;
}

h1{margin:6px}
#counter,#record{font-size:14px}

#controls{
  display:flex;
  gap:10px;
  margin:6px;
}

button{
  padding:6px 10px;
  border-radius:8px;
  border:none;
  font-size:16px;
  cursor:pointer;
}

#container{
  position:relative;
  margin-top:10px;
}

img{
  width:70vw;
  max-width:300px;
  border-radius:20px;
  user-select:none;
}

/* TOKAT ANÄ°MASYONU */
.hit{animation:slap .4s ease-out}
@keyframes slap{
  30%{transform:translateX(50px) rotate(8deg)}
  60%{transform:translateX(-40px) rotate(-6deg)}
}

/* ðŸŸ£ MORLUK â€“ 5â€™TEN SONRA KALICI */
.bruise{
  filter:hue-rotate(290deg) saturate(1.4) brightness(0.9);
}

/* YAZI / EMOJI */
.effect{
  position:absolute;
  font-size:26px;
  font-weight:bold;
  pointer-events:none;
  animation:pop .8s forwards;
}
@keyframes pop{
  0%{opacity:1; transform:scale(1)}
  100%{opacity:0; transform:scale(1.6) translateY(-40px)}
}

/* SARSINTI */
.shake{animation:shake .2s}
@keyframes shake{
  25%{transform:translateX(-8px)}
  75%{transform:translateX(8px)}
}
</style>
</head>

<body>

<h1>ARÄ°FÄ° TOKATLA ðŸ‘‹</h1>
<div id="counter">Tokat: 0</div>
<div id="record">Rekor: 0</div>

<div id="controls">
  <button id="soundBtn">ðŸ”Š</button>
  <button onclick="resetGame()">ðŸ”„</button>
  <button onclick="share()">ðŸ“¤</button>
</div>

<div id="container">
  <img id="arif" src="arif.jpg">
</div>

<!-- SESLER -->
<audio id="s1" src="slap1.mp3" preload="auto"></audio>
<audio id="s2" src="slap2.mp3" preload="auto"></audio>
<audio id="s3" src="slap3.mp3" preload="auto"></audio>

<script>
const arif=document.getElementById("arif");
const counter=document.getElementById("counter");
const recordEl=document.getElementById("record");
const container=document.getElementById("container");
const soundBtn=document.getElementById("soundBtn");

const sounds=[
  document.getElementById("s1"),
  document.getElementById("s2"),
  document.getElementById("s3")
];

const effects=["Auu!","Off!","ðŸ’¥","â­","âœ¨","ðŸ‘‹","Ah be!"];

let hit=0;
let soundOn=true;
let audioUnlocked=false;
let record=localStorage.getItem("record")||0;
recordEl.innerText="Rekor: "+record;

/* ðŸ”“ MOBÄ°L SES UNLOCK */
function unlockAudio(){
  if(audioUnlocked) return;
  sounds.forEach(s=>{
    s.volume=0.9;
    s.play().then(()=>s.pause()).catch(()=>{});
  });
  audioUnlocked=true;
}

/* ðŸ”Š SES */
function playSound(){
  if(!soundOn || !audioUnlocked) return;
  const s=sounds[Math.floor(Math.random()*sounds.length)];
  s.currentTime=0;
  s.play();
}

/* ðŸŽ‰ YAZI / EMOJI */
function spawnEffect(){
  const e=document.createElement("div");
  e.className="effect";
  e.innerText=effects[Math.floor(Math.random()*effects.length)];
  e.style.left=Math.random()*70+"%";
  e.style.top=Math.random()*60+"%";
  container.appendChild(e);
  setTimeout(()=>e.remove(),800);
}

function slap(){
  unlockAudio();

  hit++;
  counter.innerText="Tokat: "+hit;

  document.body.classList.add("shake");
  setTimeout(()=>document.body.classList.remove("shake"),200);

  arif.classList.remove("hit");
  void arif.offsetWidth;
  arif.classList.add("hit");

  if(hit>=5) arif.classList.add("bruise");

  playSound();
  spawnEffect();
  spawnEffect();

  if(hit>record){
    record=hit;
    localStorage.setItem("record",record);
    recordEl.innerText="Rekor: "+record;
  }
}

function resetGame(){
  hit=0;
  counter.innerText="Tokat: 0";
  arif.className="";
}

function share(){
  navigator.clipboard.writeText(location.href);
  alert("Link kopyalandÄ± ðŸ˜Ž");
}

soundBtn.onclick=()=>{
  soundOn=!soundOn;
  soundBtn.innerText=soundOn?"ðŸ”Š":"ðŸ”‡";
};

/* â˜ï¸ TEK EVENT â€“ Ã‡Ä°FT TIKLAMA YOK */
document.addEventListener("pointerdown",e=>{
  e.preventDefault();
  slap();
},{passive:false});
</script>

</body>
</html>
